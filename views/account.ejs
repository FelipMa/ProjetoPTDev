<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <% if (req.session.user) { %>

        <h1><%= `Olá ${userEmail}` %></h1>
        <a href="/account/logout">Logout</a>

        <h3>Seus dados:</h3>
        <p><%= `Email: ${userEmail}` %></p>
        <p><%= `ID: ${userId}` %></p>
        <p><%= `Adm: ${userAdm}` %></p>
        
        
        
        <form method="POST" action="/account/edit-user">
            <input type="email" name="email" placeholder="Enter new email">
            <input type="password" name="password" placeholder="Enter new password">
            <label for="adm">adm</label>
            <input type="checkbox" name="adm">
            <button type="submit">Update (Necessário fazer login novamente)</button>
        </form>

        <a href="/account/delete">Deletar conta</a>

        <h3>Sua lista de desejos:</h3>

        <% if (req.session.user.wishList.length === 0) { %>

            <p>Não há produtos aqui por enquanto</p>

        <% } else { %>

            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>
                    <% req.session.user.wishList.forEach(function(product) { %>
                    <tr>
                        <td><%= product.name %></td>
                        <td><%= product.price %></td>
                        <td><%= product.stock %></td>
                        <td>
                            <a href=<%= `/list-products/see-product/${product.id}` %>>Ver produto</a>
                        </td>
                        <td>
                            <a href=<%= `/list-products/add-to-cart/${product.id}` %>>Adicionar ao carrinho</a>
                        </td>
                        <td>
                            <a href=<%= `/list-products/remove-from-wish-list/${product.id}` %>>Remover da lista de desejos</a>
                        </td>
                    </tr>
                    <% }); %>
                </tbody>
            </table>

        <% } %>
        
    <% } else { %>

        <h1>Necessário iniciar sessão</h1>

        <a href="/create-user">Inicie sessão aqui</a>

    <% } %>
</body>
</html>